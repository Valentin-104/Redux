---
title: Virtual DOM
date: '2024-01-31'
tags: ['JavaScript', 'React', 'DOM', 'interview']
draft: false
summary: 가상 돔
---

가상 돔을 사용하는 이유는 실제 DOM을 직접 조작하는 것이 매우 비용이 많이 들고 성능 저하를 일으킬 수 있기 때문에, 이 문제를 해결하기 위해 등장했다. React는 실제 웹 페이지의 DOM 구조를 단순화하여 컴퓨터 메모리 상에 가볍게 복제해 놓고, 이를 통해 웹 페이지의 변화를 빠르고 효율적으로 관리할 수 있게 해준다. 실제 DOM을 직접 변경하는 대신, 가상 돔에 변화를 먼저 적용하고, 최종적으로 필요한 부분만 실제 DOM에 반영함으로써 성능을 향상시키는 방식이다.

### 가상 돔의 작동 원리:

1. **변경 사항 감지:** 애플리케이션의 상태가 변경되면, 이 변경 사항은 먼저 가상 돔에 반영된다. React는 이러한 상태 변경을 감지하고 새로운 가상 돔 트리를 생성한다.

2. **Diffing 알고리즘:** React는 새로운 가상 돔 트리와 이전 가상 돔 트리를 비교(diffing)하여 두 트리 간의 차이점을 계산한다. 이 과정은 "재조정(Reconciliation)" 과정이라고도 불립니다.

3. **변경 사항 계산:** Diffing 알고리즘을 통해 실제 DOM에 적용해야 할 최소한의 변경 사항을 계산한다. 이 단계에서는 실제 DOM을 업데이트해야 할 구체적인 부분만 식별된다.

4. **배치 업데이트:** 계산된 변경 사항은 효율적인 방식으로 실제 DOM에 배치 업데이트된다. React는 가능한 한 적은 연산으로 DOM을 업데이트하기 위해 변경 사항을 모아 놓았다가 한 번에 처리한다.

### 가상 돔의 장점:

- **성능 향상:** 실제 DOM 조작은 비용이 많이 든다. 가상 돔은 메모리 내에서 작동하기 때문에 훨씬 빠르며, 최종적으로 실제 DOM에 적용되는 변경 사항은 최소화된다.
- **선언적 UI:** React는 선언적 프로그래밍 패러다임을 사용한다. UI의 상태를 선언하고, 데이터가 변경될 때 UI가 어떻게 업데이트될지 React가 처리한다. 때문에 개발자는 상태의 변화에만 집중할 수 있다(DX 개선).

가상 돔은 React의 성능을 극대화하고, 개발자가 보다 직관적으로 UI를 설계할 수 있게 해주는 중요한 기술이다.